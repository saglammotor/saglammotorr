<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAÄLAM MOTOR | Motosiklet SatÄ±ÅŸ Formu</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Roboto:wght@700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #f5b002; --secondary: #e31e24; --bg: #0a0a0a; --card-bg: #161616; }
        body { margin: 0; padding: 0; font-family: 'Roboto', sans-serif; background-color: var(--bg); color: #fff; padding-bottom: 50px; }
        .top-nav { background: var(--secondary); text-align: center; padding: 12px; font-weight: 900; font-size: 14px; letter-spacing: 2px; text-transform: uppercase; }
        header { padding: 20px; display: flex; justify-content: center; border-bottom: 2px solid #222; margin-bottom: 40px; }
        .logo { font-family: 'Oswald', sans-serif; font-size: 35px; color: #fff; text-transform: uppercase; text-decoration: none; font-weight: 900; }
        .logo span { color: var(--primary); }
        .form-container { max-width: 800px; margin: 0 auto; background: var(--card-bg); padding: 40px; border-radius: 20px; border: 3px solid var(--primary); box-shadow: 0 20px 40px rgba(0,0,0,0.8); }
        h2 { font-family: 'Oswald', sans-serif; color: var(--primary); font-size: 35px; text-align: center; margin-bottom: 30px; text-transform: uppercase; font-weight: 900; }
        label { font-weight: 900; color: #fff; margin-bottom: 10px; display: block; font-size: 15px; text-transform: uppercase; }
        
        /* Fiyat GiriÅŸi Ä°Ã§in Ã–zel Stil */
        .fiyat-input-wrapper { position: relative; display: flex; align-items: center; }
        .fiyat-input-wrapper input { padding-right: 45px !important; }
        .fiyat-input-wrapper .tl-symbol { position: absolute; right: 15px; top: 18px; font-size: 20px; font-weight: 900; color: var(--primary); pointer-events: none; }

        input, textarea { background: #222 !important; border: 2px solid #333 !important; padding: 15px !important; color: #fff !important; border-radius: 12px !important; font-size: 18px !important; font-weight: 700 !important; margin-bottom: 20px; width: 100%; }
        input:focus, textarea:focus { border-color: var(--primary) !important; outline: none; background: #282828 !important; }
        
        .ekspertiz-box { background: #000; padding: 25px; border-radius: 15px; border: 2px solid var(--secondary); margin-bottom: 25px; }
        .ekspertiz-title { color: var(--secondary); font-weight: 900; letter-spacing: 1px; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; text-transform: uppercase; }
        .option-label { color: #fff !important; font-weight: 700 !important; cursor: pointer; font-size: 18px; margin-right: 25px; display: inline-flex; align-items: center; }
        .form-check-input { width: 1.5em; height: 1.5em; cursor: pointer; background-color: #333; border: 2px solid #555; }
        .form-check-input:checked { background-color: var(--secondary) !important; border-color: #fff !important; box-shadow: 0 0 10px var(--secondary); }
        
        .btn-submit { background: var(--primary); color: #000; padding: 22px; border: none; border-radius: 12px; font-size: 24px; font-weight: 900; cursor: pointer; width: 100%; transition: 0.3s; text-transform: uppercase; }
        .btn-submit:hover { transform: scale(1.03); background: #fff; box-shadow: 0 0 20px var(--primary); }
        .preview-img { width: 90px; height: 90px; object-fit: cover; border-radius: 12px; border: 3px solid var(--primary); margin: 5px; }
        .back-link { color: var(--primary); text-decoration: none; font-weight: 900; display: inline-block; margin-bottom: 25px; }
    </style>
</head>
<body>

<div class="top-nav">SAÄLAM MOTOR | GÃœVENLE ALIR, DEÄERÄ°NDE Ã–DERÄ°Z</div>
<header><a href="index.html" class="logo">SAÄLAM<span>MOTOR</span></a></header>

<div class="container">
    <a href="index.html" class="back-link"><i class="fa-solid fa-arrow-left me-2"></i>ANA SAYFAYA DÃ–N</a>
    <div class="form-container">
        <h2>MOTOSÄ°KLET TEKLÄ°F FORMU</h2>
        <form id="motorFormu">
            <input type="hidden" name="_subject" value="YENÄ° MOTOR SATIÅ TALEBÄ°! ğŸï¸">
            <input type="hidden" name="_captcha" value="false">

            <div class="row">
                <div class="col-md-6"><label>AD SOYAD</label><input type="text" name="Ad_Soyad" placeholder="Ä°sim Soyisim" oninput="kb(this)" required></div>
                <div class="col-md-6"><label>TELEFON</label><input type="tel" name="Telefon" id="tel" placeholder="05xx xxx xx xx" oninput="tf(this)" required></div>
            </div>

            <label>MOTOR MARKA / MODEL</label>
            <input type="text" name="Motor_Marka_Model" placeholder="Ã–rn: Honda Forza 250" oninput="kb(this)" required>

            <div class="row">
                <div class="col-md-6"><label>TESCÄ°L TARÄ°HÄ°</label><input type="date" name="Tescil_Tarihi" required></div>
                <div class="col-md-6"><label>KÄ°LOMETRE</label><input type="text" name="Kilometre" placeholder="Ã–rn: 5.000" oninput="kmf(this)" required></div>
            </div>

            <div class="ekspertiz-box">
                <div class="ekspertiz-title">EKSPERTÄ°Z DURUMU</div>
                <div class="mb-3">
                    <label class="d-block mb-2">Tramer Hasar KaydÄ± Var mÄ±?</label>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="Tramer" id="t1" value="Evet" required><label class="option-label" for="t1">Evet</label></div>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="Tramer" id="t2" value="HayÄ±r" required><label class="option-label" for="t2">HayÄ±r</label></div>
                </div>
                <div class="mb-3">
                    <label class="d-block mb-2">Yetkili Servis BakÄ±mlÄ± mÄ±?</label>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="Servis" id="s1" value="Evet" required><label class="option-label" for="s1">Evet</label></div>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="Servis" id="s2" value="HayÄ±r" required><label class="option-label" for="s2">HayÄ±r</label></div>
                </div>
                <div>
                    <label class="d-block mb-2">Garantisi Devam Ediyor mu?</label>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="Garanti" id="g1" value="Evet" required><label class="option-label" for="g1">Evet</label></div>
                    <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="Garanti" id="g2" value="HayÄ±r" required><label class="option-label" for="g2">HayÄ±r</label></div>
                </div>
            </div>

            <label>DÃœÅÃœNDÃœÄÃœNÃœZ FÄ°YAT</label>
            <div class="fiyat-input-wrapper mb-3">
                <input type="text" name="Fiyat" id="fiyat" placeholder="Ã–rn: 245.000" oninput="ff(this)" required>
                <span class="tl-symbol">â‚º</span>
            </div>

            <label>MOTOR GÃ–RSELLERÄ° (MAX 25)</label>
            <input type="file" name="attachment" id="gorseller" multiple accept="image/*" onchange="pv(this)">
            <div id="pvContainer" class="d-flex flex-wrap mb-4"></div>

            <div id="uyari" class="alert d-none text-center fw-black" style="font-size: 1.1rem; border-radius: 12px; border: 2px solid transparent;"></div>
            <button type="submit" id="btn" class="btn-submit">NAKÄ°T TEKLÄ°F AL / GÃ–NDER</button>
        </form>
    </div>
</div>

<script>
    let dt = new DataTransfer();
    function pv(i) {
        for (let f of i.files) { if (dt.items.length < 25) dt.items.add(f); }
        i.files = dt.files;
        const c = document.getElementById('pvContainer'); c.innerHTML = '';
        Array.from(dt.files).forEach(f => { const img = document.createElement('img'); img.src = URL.createObjectURL(f); img.className = 'preview-img'; c.appendChild(img); });
    }

    function formuTemizle() {
        document.getElementById('motorFormu').reset();
        dt = new DataTransfer();
        document.getElementById('gorseller').files = dt.files;
        document.getElementById('pvContainer').innerHTML = '';
        setTimeout(() => {
            const b = document.getElementById('btn');
            b.disabled = false;
            b.innerText = "NAKÄ°T TEKLÄ°F AL / GÃ–NDER";
            document.getElementById('uyari').classList.add('d-none');
        }, 3000);
    }

    function tf(i) {
        let r = i.value.replace(/\D/g, ''); let f = '';
        if (r.startsWith('0')) {
            r = r.substring(0, 11);
            if (r.length < 5) f = r;
            else if (r.length < 8) f = r.slice(0, 4) + ' ' + r.slice(4);
            else if (r.length < 10) f = r.slice(0, 4) + ' ' + r.slice(4, 7) + ' ' + r.slice(7);
            else f = r.slice(0, 4) + ' ' + r.slice(4, 7) + ' ' + r.slice(7, 9) + ' ' + r.slice(9);
        } else {
            r = r.substring(0, 10);
            if (r.length < 4) f = r;
            else if (r.length < 7) f = r.slice(0, 3) + ' ' + r.slice(3);
            else if (r.length < 9) f = r.slice(0, 3) + ' ' + r.slice(3, 6) + ' ' + r.slice(6);
            else f = r.slice(0, 3) + ' ' + r.slice(3, 6) + ' ' + r.slice(6, 8) + ' ' + r.slice(8);
        }
        i.value = f;
    }

    // FÄ°YAT DÃœZENLEMESÄ°: Rakam silerken takÄ±lma engellendi
    function ff(i) {
        let v = i.value.replace(/\D/g, "");
        i.value = v === "" ? "" : new Intl.NumberFormat('tr-TR').format(v);
    }

    function kmf(i) { let v = i.value.replace(/\D/g, ""); i.value = v === "" ? "" : v.replace(/\B(?=(\d{3})+(?!\d))/g, "."); }
    function kb(i) { let v = i.value.split(' '); for (let j = 0; j < v.length; j++) if (v[j]) v[j] = v[j][0].toUpperCase() + v[j].slice(1); i.value = v.join(' '); }

    document.getElementById('motorFormu').addEventListener('submit', function(e) {
        e.preventDefault();
        const u = document.getElementById('uyari');
        const b = document.getElementById('btn');

        if (dt.items.length === 0) {
            u.className = "alert alert-warning d-block"; u.innerHTML = "ğŸ“¸ <b>EKSÄ°K EVRAK!</b> Kral, motorun en az 1 fotoÄŸrafÄ±nÄ± yÃ¼kle de ustalarÄ±mÄ±z baksÄ±n.";
            return;
        }

        let t = document.getElementById('tel').value.replace(/\D/g, '');
        let son = localStorage.getItem('sm_son_' + t);
        let suan = new Date().getTime();
        
        if (son && (suan - parseInt(son)) < 86400000) {
            let k = 86400000 - (suan - parseInt(son));
            let h = Math.floor(k / 3600000), m = Math.floor((k % 3600000) / 60000);
            u.className = "alert alert-warning d-block"; 
            u.innerHTML = `
                <div style="font-size: 1.3rem; margin-bottom: 10px;">ğŸï¸ <b>KRAL YAVAÅ, PÄ°STONLARI ERÄ°TTÄ°N!</b> ğŸ˜…</div>
                <p>Yeni form gÃ¶ndermek iÃ§in motorun 24 saat soÄŸumasÄ± lazÄ±m.</p>
                <div class="badge bg-dark p-2 mb-3" style="font-size: 1rem;">KALAN SÃœRE: ${h} SAAT ${m} DAKÄ°KA</div>
                <hr style="border-color: rgba(255,255,255,0.2)">
                <p class="small fw-bold">"Kanka benim iÅŸim Ã§ok acil, bekleyemem" diyorsan Ã§ekinme, hemen bizi ara:</p>
                <div class="d-flex justify-content-center gap-2 mt-2">
                    <a href="tel:+905461839986" class="btn btn-dark btn-sm fw-bold">Ä°SMAÄ°L: 0546 183 99 86</a>
                    <a href="tel:+905075195440" class="btn btn-danger btn-sm fw-bold">YAKUP: 0507 519 54 40</a>
                </div>
            `;
            return;
        }

        b.disabled = true; b.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Ä°LETÄ°LÄ°YOR...';
        u.className = "alert alert-info d-block"; u.innerHTML = "â³ <b>HIZLI SATIÅ FORMUNUZ SAÄLAM MOTOR EKÄ°BÄ°NE Ä°LETÄ°LÄ°YOR...</b> LÃ¼tfen bekleyin.";

        fetch("https://formsubmit.co/ajax/yakupsaglam47@gmail.com", { method: "POST", body: new FormData(this) })
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                localStorage.setItem('sm_son_' + t, suan.toString());
                u.className = "alert alert-success d-block"; 
                u.innerHTML = "âœ… <b>HIZLI SATIÅ FORMUNUZ SAÄLAM MOTOR EKÄ°BÄ°NE BAÅARIYLA Ä°LETÄ°LDÄ°!</b> En kÄ±sa sÃ¼rede dÃ¶neceÄŸiz.";
                b.innerText = "Ä°LETÄ°LDÄ°";
                formuTemizle();
            } else throw new Error();
        }).catch(() => {
            u.className = "alert alert-danger d-block"; u.innerHTML = "âŒ <b>HATA!</b> Form gÃ¶nderilemedi. LÃ¼tfen internetini kontrol et veya bizi ara.";
            b.disabled = false; b.innerText = "TEKRAR DENE";
        });
    });
</script>
</body>
</html>